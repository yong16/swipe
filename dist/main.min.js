/*!
 * @autots/swipe v0.0.1
 * Last Modified @ 2021-6-22 6:24:11 ├F10: PM┤
 * Released under the MIT License.
 */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Swipe=i():(t.AutoTs=t.AutoTs||{},t.AutoTs.Swipe=i())}(this,(function(){return function(t){var i={};function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=i,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,i){if(1&i&&(t=s(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)s.d(e,n,function(i){return t[i]}.bind(null,n));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=2)}([function(t,i){t.exports=require("@babel/runtime/helpers/classCallCheck")},function(t,i){t.exports=require("@babel/runtime/helpers/createClass")},function(t,i,s){"use strict";s.r(i),s.d(i,"default",(function(){return l}));var e=s(0),n=s.n(e),o=s(1),r=s.n(o),h=function(t){var i=t.changedTouches[0];return{x:i.clientX,y:i.clientY}},a=!1,l=function(){function t(i,s){var e;if(n()(this,t),this.options=s,this.pos={startX:0,startY:0,endX:0,endY:0,distanceX:0},this.loop={timer:0,cloneNumber:2,startIdxAdd:1},this.destroy=this.destroyed,this.moveTo=this.moveToPosition,this.options=Object.assign({initIndex:0,loop:!0},this.options),this.swipeEl="string"==typeof i?(e=i,document.querySelector(e)):i,this.$ul=this.swipeEl.querySelector(".swipe__container"),this.$li=Array.from(this.$ul.querySelectorAll(".swipe-item")),1!==this.$li.length){var o=this.options,r=o.autoPlay,h=o.loop,a=o.initIndex;r&&!h&&(this.options.loop=!0),this.setLoop(this.options.loop),(a>this.$li.length-1-this.loop.cloneNumber||a<0)&&(this.options.initIndex=0+this.loop.startIdxAdd),this.init()}}return r()(t,[{key:"onTouchStart",value:function(t){a=!0,this.pos.startX=h(t).x,this.pos.startY=h(t).y,this.clearAutoPlay()}},{key:"onTouchMove",value:function(t){this.pos.endX=h(t).x,this.pos.endY=h(t).y;var i=this.pos.endX-this.pos.startX,s=this.pos.endY-this.pos.startY;if(this.pos.distanceX=i,!(Math.abs(i)<Math.abs(s))){a&&(t.preventDefault(),this.removeTransition(this.$ul),a=!1);var e=this.options,n=e.loop,o=e.initIndex;if(n||!(0===o&&i>0||o===this.swipeItemsLen-1&&i<0)){var r=-this.options.initIndex*this.swipeW+i;this.setTranslate(this.$ul,r)}}}},{key:"onTouchEnd",value:function(){a=!1,Math.abs(this.pos.distanceX)>this.swipeW/5&&(this.pos.distanceX>0?this.options.initIndex--:this.options.initIndex++);var t=this.options,i=t.initIndex;t.loop?this.addTransition(this.$ul):i<0?this.options.initIndex=0:i>this.swipeItemsLen-1?this.options.initIndex=this.swipeItemsLen-1:this.addTransition(this.$ul);var s=-this.options.initIndex*this.swipeW;this.setTranslate(this.$ul,s),this.pos.startX=0,this.pos.distanceX=0,this.autoPlay()}},{key:"autoPlay",value:function(){var t=this;clearInterval(this.loop.timer),this.options.autoPlay&&(this.loop.timer=window.setInterval((function(){t.options.initIndex++,t.addTransition(t.$ul);var i=-t.options.initIndex*t.swipeW;t.setTranslate(t.$ul,i)}),this.options.autoPlay))}},{key:"clearAutoPlay",value:function(){clearInterval(this.loop.timer)}},{key:"initDots",value:function(){if(this.options.showDots){for(var t="",i=0,s=this.swipeItemsLen-this.loop.cloneNumber;i<s;i++)t+="<i></i>";var e=document.createElement("div");e.className="swipe__dots",e.innerHTML=t,this.swipeEl.appendChild(e),this.setDotsClass()}}},{key:"setDotsClass",value:function(){if(this.options.showDots){for(var t=Array.from(this.swipeEl.querySelectorAll(".swipe__dots > i")),i=this.swipeItemsLen,s=0;s<i-this.loop.cloneNumber;s++)t[s].classList.remove("activate");t[this.options.initIndex-this.loop.startIdxAdd].classList.add("activate")}}},{key:"setItemClass",value:function(){for(var t=this.swipeItemsLen,i=0;i<t;i++)this.$li[i].classList.remove("activate");this.$li[this.options.initIndex].classList.add("activate")}},{key:"addTransition",value:function(t){t.classList.add("transition")}},{key:"removeTransition",value:function(t){t.classList.remove("transition")}},{key:"onTransEnd",value:function(){var t=this.options,i=t.initIndex,s=t.loop,e=t.change;s&&(i>=this.$li.length-1?this.options.initIndex=1:i<=0&&(this.options.initIndex=this.swipeItemsLen-this.loop.cloneNumber)),this.removeTransition(this.$ul);var n=-this.options.initIndex*this.swipeW;if(this.setTranslate(this.$ul,n),this.setDotsClass(),this.setItemClass(),e&&"function"==typeof e){var o=this.options.initIndex;s&&(o-=this.loop.startIdxAdd),this.options.change(o)}}},{key:"setTranslate",value:function(t,i){var s=t.style;s.transform="translate3d(".concat(i,"px, 0, 0)"),s.webkitTransform="translate3d(".concat(i,"px, 0, 0)")}},{key:"setLoop",value:function(t){if(!t)return this.loop.cloneNumber=0,void(this.loop.startIdxAdd=0);this.options.initIndex+=this.loop.startIdxAdd;var i=this.$li[0].cloneNode(!0),s=this.$li[this.$li.length-1].cloneNode(!0);this.$ul.insertBefore(s,this.$li[0]),this.$ul.appendChild(i),this.$li=Array.from(this.$ul.querySelectorAll(".swipe-item"))}},{key:"moveToPosition",value:function(t){if(!(t>this.swipeItemsLen-1-this.loop.cloneNumber||t<0)){this.options.loop?this.options.initIndex=t+1:this.options.initIndex=t,this.addTransition(this.$ul);var i=-this.options.initIndex*this.swipeW;this.setTranslate(this.$ul,i),this.setItemClass(),this.setDotsClass()}}},{key:"init",value:function(){var t=this;this.swipeW=this.swipeEl.clientWidth,this.$ul.style.width="".concat(this.swipeW*this.$li.length,"px"),this.$li.forEach((function(i){i.style.width="".concat(t.swipeW,"px")})),this.swipeItemsLen=this.$li.length,this.initDots();var i=-this.options.initIndex*this.swipeW;this.setTranslate(this.$ul,i),this.setItemClass(),this.autoPlay(),this.$ul.addEventListener("transitionend",this.onTransEnd.bind(this),!1),this.swipeEl.addEventListener("touchstart",this.onTouchStart.bind(this),!1),this.swipeEl.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.swipeEl.addEventListener("touchend",this.onTouchEnd.bind(this),!1),window.addEventListener("resize",this.onResize.bind(this),!1)}},{key:"onResize",value:function(){this.init()}},{key:"destroyed",value:function(){this.swipeEl.removeEventListener("touchstart",this.onTouchStart.bind(this),!1),this.swipeEl.removeEventListener("touchmove",this.onTouchMove.bind(this),!1),this.swipeEl.removeEventListener("touchend",this.onTouchEnd.bind(this),!1),this.$ul.removeEventListener("transitionend",this.onTransEnd.bind(this),!1),window.removeEventListener("resize",this.onResize.bind(this),!1)}}]),t}()}]).default}));