/*!
 * @autots/swipe v0.0.1
 * Last Modified @ 2020-9-29 8:40:24 ├F10: PM┤
 * Released under the MIT License.
 */
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.Swipe=i():(t.AutoTs=t.AutoTs||{},t.AutoTs.Swipe=i())}(this,(function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(s,n,function(i){return t[i]}.bind(null,n));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=2)}([function(t,i){t.exports=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}},function(t,i){function e(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}t.exports=function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}},function(t,i,e){"use strict";e.r(i),e.d(i,"default",(function(){return h}));var s=e(0),n=e.n(s),o=e(1),r=e.n(o),a=function(t){var i=t.changedTouches[0];return{x:i.clientX,y:i.clientY}},h=function(){function t(i,e){var s;if(n()(this,t),this.options=e,this.pos={startX:0,startY:0,endX:0,endY:0,distanceX:0},this.loop={timer:0,cloneNumber:2,startIdxAdd:1},this.destroy=this.destroyed,this.options=Object.assign({initIndex:0,loop:!0},this.options),this.swipeEl="string"==typeof i?(s=i,document.querySelector(s)):i,this.$ul=this.swipeEl.querySelector(".swipe__container"),this.$li=Array.from(this.$ul.querySelectorAll(".swipe-item")),1!==this.$li.length){var o=this.options,r=o.autoPlay,a=o.loop;r&&!a&&(this.options.loop=!0),this.setLoop(this.options.loop),this.init()}}return r()(t,[{key:"onTouchStart",value:function(t){this.pos.startX=a(t).x,this.pos.startY=a(t).y,this.clearAutoPlay()}},{key:"onTouchMove",value:function(t){this.pos.endX=a(t).x,this.pos.endY=a(t).y;var i=this.pos.endX-this.pos.startX,e=this.pos.endY-this.pos.startY;if(this.pos.distanceX=i,Math.abs(i)>Math.abs(e)){t.stopPropagation(),t.preventDefault(),this.removeTransition(this.$ul);var s=-this.options.initIndex*this.swipeW+i;this.setTranslate(this.$ul,s)}}},{key:"onTouchEnd",value:function(){Math.abs(this.pos.distanceX)>this.swipeW/5&&(this.pos.distanceX>0?this.options.initIndex--:this.options.initIndex++);var t=this.options,i=t.initIndex;t.loop||(i<0&&(this.options.initIndex=0),i>this.swipeItemsLen-1&&(this.options.initIndex=this.swipeItemsLen-1)),this.addTransition(this.$ul);var e=-this.options.initIndex*this.swipeW;this.setTranslate(this.$ul,e),this.pos.startX=0,this.pos.distanceX=0,this.autoPlay()}},{key:"autoPlay",value:function(){var t=this;clearInterval(this.loop.timer),this.options.autoPlay&&(this.loop.timer=window.setInterval((function(){t.options.initIndex++,t.addTransition(t.$ul);var i=-t.options.initIndex*t.swipeW;t.setTranslate(t.$ul,i)}),this.options.autoPlay))}},{key:"clearAutoPlay",value:function(){clearInterval(this.loop.timer)}},{key:"initDots",value:function(){if(this.options.showDots){for(var t="",i=0,e=this.swipeItemsLen-this.loop.cloneNumber;i<e;i++)t+="<i></i>";var s=document.createElement("div");s.className="swipe__dots",s.innerHTML=t,this.swipeEl.appendChild(s),this.setDotsClass()}}},{key:"setDotsClass",value:function(){if(this.options.showDots){for(var t=Array.from(this.swipeEl.querySelectorAll(".swipe__dots > i")),i=this.swipeItemsLen,e=0;e<i-this.loop.cloneNumber;e++)t[e].classList.remove("activate");t[this.options.initIndex-this.loop.startIdxAdd].classList.add("activate")}}},{key:"addTransition",value:function(t){t.classList.add("transition")}},{key:"removeTransition",value:function(t){t.classList.remove("transition")}},{key:"onTransEnd",value:function(){var t=this.options,i=t.initIndex,e=t.loop,s=t.change;e&&(i>=this.$li.length-1?this.options.initIndex=1:i<=0&&(this.options.initIndex=this.swipeItemsLen-this.loop.cloneNumber)),this.removeTransition(this.$ul);var n=-this.options.initIndex*this.swipeW;if(this.setTranslate(this.$ul,n),this.setDotsClass(),s&&"function"==typeof s){var o=this.options.initIndex;e&&(o-=this.loop.startIdxAdd),this.options.change(o)}}},{key:"setTranslate",value:function(t,i){var e=t.style;e.transform="translate3d(".concat(i,"px, 0, 0)"),e.webkitTransform="translate3d(".concat(i,"px, 0, 0)")}},{key:"setLoop",value:function(t){if(!t)return this.loop.cloneNumber=0,void(this.loop.startIdxAdd=0);this.options.initIndex+=this.loop.startIdxAdd;var i=this.$li[0].cloneNode(!0),e=this.$li[this.$li.length-1].cloneNode(!0);this.$ul.insertBefore(e,this.$li[0]),this.$ul.appendChild(i),this.$li=Array.from(this.$ul.querySelectorAll(".swipe-item"))}},{key:"init",value:function(){var t=this;this.swipeW=this.swipeEl.clientWidth,this.swipeEl.querySelector(".swipe__container").style.width="".concat(this.swipeW*this.$li.length,"px"),this.$li.forEach((function(i){i.style.width="".concat(t.swipeW,"px")})),this.swipeItemsLen=this.$li.length,this.initDots();var i=-this.options.initIndex*this.swipeW;this.setTranslate(this.$ul,i),this.autoPlay(),this.$ul.addEventListener("transitionend",this.onTransEnd.bind(this),!1),this.swipeEl.addEventListener("touchstart",this.onTouchStart.bind(this),!1),this.swipeEl.addEventListener("touchmove",this.onTouchMove.bind(this),!1),this.swipeEl.addEventListener("touchend",this.onTouchEnd.bind(this),!1),window.addEventListener("resize",this.onResize.bind(this),!1)}},{key:"onResize",value:function(){this.init()}},{key:"destroyed",value:function(){this.swipeEl.removeEventListener("touchstart",this.onTouchStart.bind(this),!1),this.swipeEl.removeEventListener("touchmove",this.onTouchMove.bind(this),!1),this.swipeEl.removeEventListener("touchend",this.onTouchEnd.bind(this),!1),this.$ul.removeEventListener("transitionend",this.onTransEnd.bind(this),!1),window.removeEventListener("resize",this.onResize.bind(this),!1)}}]),t}()}]).default}));